/*! event-organiser 2.4.1 2013-11-16 14:18 */
var eventorganiser=eventorganiser||{};eventorganiser.versionCompare=function(a,b){if("stringstring"!=typeof a+typeof b)return!1;for(var c=a.split("."),d=b.split("."),e=Math.max(c.length,d.length),f=0;e>f;f++){if(c[f]&&!d[f]&&parseInt(c[f],10)>0||parseInt(c[f],10)>parseInt(d[f],10))return 1;if(d[f]&&!c[f]&&parseInt(d[f],10)>0||parseInt(c[f],10)<parseInt(d[f],10))return-1}return 0},jQuery(document).ready(function(a){var b;eventOrganiserSchedulePicker.init({views:{start_date:"#eventorganiser_detail #from_date",start_time:"#HWSEvent_time",end_date:"#eventorganiser_detail #to_date",end_time:"#HWSEvent_time2",occurrence_picker:"#eo_occurrence_datepicker",occurrence_picker_toggle:".eo_occurrence_toggle",schedule_last_date:"#recend",schedule:"#HWSEventInput_Req",is_all_day:"#eo_allday",frequency:"#HWSEvent_freq",week_repeat:"#dayofweekrepeat",month_repeat:"#dayofmonthrepeat",recurrence_section:".reocurrence_row",include:"#eo_occurrence_includes",exclude:"#eo_occurrence_excludes",schedule_span:"#recpan",summary:"#event_summary"},format:EO_Ajax_Event.format,is24hour:Boolean(EO_Ajax_Event.is24hour),startday:EO_Ajax_Event.startday,schedule:window.eventOrganiserSchedule,locale:EO_Ajax_Event.locale,editable:"once"==a("#HWSEventInput_Req").val()||"custom"==a("#HWSEventInput_Req").val()}),a("#HWSEvent_rec").click(function(){window.eventOrganiserSchedulePicker.options.editable=a("#HWSEvent_rec").is(":checked"),window.eventOrganiserSchedulePicker.update_form()}),a.widget("ui.combobox",{_create:function(){var c=this.element.hide(),d=c.children(":selected"),e=d.val()?d.text():"",f=a("<span>").addClass("ui-combobox eo-venue-input").insertAfter(c),g={delay:0,minLength:0,source:function(b,c){a.getJSON(EO_Ajax_Event.ajaxurl+"?callback=?&action=eo-search-venue",b,function(b){var d=a.map(b,function(a){return a.label=a.name,a});c(d)})},select:function(b,c){a("tr.venue_row").length>0&&(0===parseInt(c.item.term_id,10)?(a("tr.venue_row").hide(),a("#eventorganiser_event_detail tr.eo-add-new-venue").hide()):(a("tr.venue_row").show(),a("#eventorganiser_event_detail tr.eo-add-new-venue").hide()),eo_initialize_map(c.item.venue_lat,c.item.venue_lng),a("#eo_venue_Lat").val(c.item.venue_lat),a("#eo_venue_Lng").val(c.item.venue_lng)),a("#venue_select").removeAttr("selected"),a("#venue_select").val(c.item.term_id)}},h=a("<input>").appendTo(f).val(e).addClass("ui-combobox-input").autocomplete(g).addClass("ui-widget-content ui-corner-left"),i=a.ui?a.ui.version||0:-1,j=eventorganiser.versionCompare(i,"1.10")>=0?"ui-autocomplete":"autocomplete";h.data(j)._renderItem=function(b,c){if(0===parseInt(c.term_id,10))return a("<li></li>").data(j+"-item",c).append("<a>"+c.label+"</a>").appendTo(b);var d=[c.venue_address,c.venue_city,c.venue_state,c.venue_postcode,c.venue_country],e=a.grep(d,function(a){return a}).join(", "),f=eventorganiser.versionCompare(i,"1.10")>=0?"ui-autocomplete-item":"item.autocomplete";return a("<li></li>").data(f,c).append("<a>"+c.label+"</br> <span style='font-size: 0.8em'><em>"+e+"</span></em></a>").appendTo(b)};var k=a("<span>").addClass("eo-venue-combobox-buttons").appendTo(f);a("<a style='vertical-align: top;margin: 0px -1px;padding: 0px;height: 21px;'>").attr("title","Show All Items").appendTo(k).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle ui-combobox-button").click(function(){return h.autocomplete("widget").is(":visible")?(h.autocomplete("close"),void 0):(a(this).blur(),h.autocomplete("search","").focus(),void 0)}),"event"==pagenow&&EO_Ajax_Event.current_user_can.manage_venues&&a("<a style='vertical-align: top;margin: 0px -1px;padding: 0px;height: 21px;'>").attr("title","Create New Venue").appendTo(k).button({icons:{primary:"ui-icon-plus"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right add-new-venue ui-combobox-button").click(function(){a("#eventorganiser_event_detail tr.eo-add-new-venue").show(),a("tr.venue_row").show(),b={id:a("#venue_select").val(),label:a(".eo-venue-input input").val(),lat:a("#eo_venue_Lat").val(),lng:a("#eo_venue_Lng").val()},a("#venue_select").removeAttr("selected").val(0),a(".eo-venue-combobox-select").hide(),a(".eo-venue-input input").val(""),eo_initialize_map(0,0);var c=EO_Ajax_Event.location;c?(c=c.split("/"),c=c[c.length-1],eventorganiser_code_address(c)):map.setZoom(1),a(this).blur()})}}),a("#venue_select").combobox(),a(".eo-add-new-venue-cancel").click(function(c){c.preventDefault(),a(".eo-venue-combobox-select").show(),a(".eo-add-new-venue input").val(""),eo_initialize_map(b.lat,b.lng),a("#venue_select").val(b.id),a(".eo-venue-input input").val(b.label),a("#eventorganiser_event_detail tr.eo-add-new-venue").hide()})});